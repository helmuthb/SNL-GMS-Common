# Overview
This is the project for testing and deploying the Processing Sequence Control
(PSC) via Apache Nifi. It contains a Docker Compose configuration for setting
up a local Nifi for testing purposes.

# Running Test Setup

## From _psc-nifi_ directory:
`docker-compose up -d`

## From running `docker exec -it <postgres id> psql xmp_metadata xmp`:
`create database initial_qcmasks;`

`create database add_qcmasks;`

## From _object-storage-distribution/repository-demo/database-loader_ directory:
`gradle run -PappArgs="['initialData', 'localhost:5432']"`

## From terminal in _psc-nifi_ directory:
`curl -H "Content-Type:application/json" -X POST -d @test.json localhost:8081/waveform-qc/waveform-qc-control/invoke`

# Development

## Generating a Template Nifi Processor:
`mvn archetype:generate -DarchetypeGroupId=org.apache.nifi -DarchetypeArtifactId=nifi-processor-bundle-archetype -DarchetypeVersion=1.5.0 -DnifiVersion=1.5.0`

when prompted:
- *group* = `gms`
- *artifactId* = `nifi-<processor name>-bundle`
- *version* = `0.0.1-SNAPSHOT`
- *artifactBaseName* = `<processor name>`
- *package* = `<default generated by maven>`


# References
- [Nifi Developer Guide](https://nifi.apache.org/developer-guide.html)
- [Nifi Wiki - For Developers](https://cwiki.apache.org/confluence/display/NIFI/For+Developers)
